# ğŸ‰ AI é¢æ–™è¯†åˆ«ä¸åˆ†æ - é¡¹ç›®å®Œæˆæ€»ç»“

## âœ… é¡¹ç›®çŠ¶æ€

**ç‰ˆæœ¬**: 9.0 (Open-Set + RAG + Web Search)  
**çŠ¶æ€**: âœ… å®Œæˆå¹¶éªŒè¯  
**æ›´æ–°æ—¶é—´**: 2025-10-24

---

## ğŸ† æ ¸å¿ƒæˆå°±

### 1. **å¼€æ”¾é›†è¯†åˆ«ï¼ˆOpen-Set Recognitionï¼‰**
- âŒ ç§»é™¤å—é™è¯æ±‡è¡¨ï¼ˆ40+å›ºå®šè¯æ±‡ï¼‰
- âœ… æ”¯æŒä»»æ„é¢æ–™åç§°
- âœ… æ”¯æŒä¸“ä¸šæœ¯è¯­ï¼ˆå°ç¾Šçš®ã€æ¡‘èš•ä¸ã€ç²¾çººç¾Šæ¯›ç­‰ï¼‰
- âœ… Top-5 å€™é€‰è¾“å‡ºï¼ˆä» Top-3 æ‰©å±•ï¼‰

### 2. **RAG æ£€ç´¢å¢å¼ºç”Ÿæˆ**
- âœ… ä¸¤éè¯†åˆ«æµç¨‹ï¼ˆPass 1 è§†è§‰ + Pass 2 åŸºäºè¯æ®é‡æ’åºï¼‰
- âœ… è”ç½‘æ£€ç´¢éªŒè¯ï¼ˆDuckDuckGoï¼‰
- âœ… è¯æ®æ”¶é›†å’Œå±•ç¤º
- âœ… æ™ºèƒ½é‡æ’åº

### 3. **å¼ºæç¤ºè¯ + JSON è¾“å‡º**
- âœ… ç»“æ„åŒ–æç¤ºè¯
- âœ… è¦æ±‚çº¯ JSON è¾“å‡º
- âœ… é²æ£’çš„ JSON è§£æï¼ˆMarkdown + æ­£åˆ™è¡¨è¾¾å¼ï¼‰
- âœ… å›é€€æœºåˆ¶

### 4. **å¿«é€Ÿç¨³å®šçš„å¼€å‘ç¯å¢ƒ**
- âœ… VSCode å·¥ä½œåŒºé…ç½®ï¼ˆç¦ç”¨é‡å‹åå°ä»»åŠ¡ï¼‰
- âœ… Streamlit å¼€å‘æ¨¡å¼é…ç½®
- âœ… CN é•œåƒåŠ é€Ÿ
- âœ… ä¸€é”®ä»»åŠ¡ï¼ˆè™šæ‹Ÿç¯å¢ƒã€å¯åŠ¨ã€è¯Šæ–­ï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
fashion-prompt-extractor/
â”œâ”€â”€ app_new.py                          # ä¸»åº”ç”¨å…¥å£ï¼ˆå¼€æ”¾é›† + RAGï¼‰
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ fabric_api_infer.py             # äº‘ç«¯æ¨ç†å¼•æ“ï¼ˆä¸¤éè¯†åˆ« + RAGï¼‰
â”‚   â””â”€â”€ aug/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ web_search.py               # DuckDuckGo æœç´¢ + å†…å®¹æå–
â”œâ”€â”€ .vscode/
â”‚   â”œâ”€â”€ settings.json                   # å·¥ä½œåŒºè®¾ç½®ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
â”‚   â”œâ”€â”€ tasks.json                      # ä¸€é”®ä»»åŠ¡
â”‚   â””â”€â”€ extensions.json                 # æ¨èæ‰©å±•
â”œâ”€â”€ .streamlit/
â”‚   â”œâ”€â”€ config.toml                     # Streamlit å¼€å‘æ¨¡å¼
â”‚   â””â”€â”€ secrets.toml                    # API å¯†é’¥ï¼ˆéœ€æ‰‹åŠ¨é…ç½®ï¼‰
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ ensure_venv.ps1                 # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ + å®‰è£…ä¾èµ–
â”‚   â””â”€â”€ quick_diag.ps1                  # å¿«é€Ÿè¯Šæ–­
â”œâ”€â”€ requirements.txt                    # ä¾èµ–åˆ—è¡¨
â””â”€â”€ æ–‡æ¡£/
    â”œâ”€â”€ README.md                       # é¡¹ç›®ä¸»æ–‡æ¡£
    â”œâ”€â”€ QUICK_START.md                  # å¿«é€Ÿå¼€å§‹æŒ‡å—
    â”œâ”€â”€ DEV_SETUP.md                    # å¼€å‘ç¯å¢ƒé…ç½®
    â”œâ”€â”€ ENGINE_ROUTER.md                # å¼•æ“è·¯ç”±å™¨æ–‡æ¡£
    â”œâ”€â”€ JSON_PARSING_SPEC.md            # JSON è§£æè§„èŒƒ
    â”œâ”€â”€ RAG_REFACTOR_COMPLETE.txt       # RAG é‡æ„æ€»ç»“
    â””â”€â”€ APP_INTEGRATION_COMPLETE.txt    # é›†æˆéªŒæ”¶æ–‡æ¡£
```

---

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

### ç”¨æˆ·æ“ä½œæµç¨‹

```
1. æ‰“å¼€åº”ç”¨ (http://localhost:8501)
   â†“
2. ä¸Šä¼ å›¾ç‰‡ï¼ˆJPG/PNGï¼‰
   â†“
3. è°ƒæ•´ä¾§è¾¹æ å‚æ•°
   â€¢ å¼•æ“: Cloud Â· Qwen-VL
   â€¢ é€‰æ¡†å¤§å°: 80-320px
   â€¢ é¢„è§ˆæ”¾å¤§å€æ•°: 1.0-3.0x
   â€¢ è¯­è¨€: ä¸­æ–‡/è‹±æ–‡
   â€¢ è”ç½‘æ£€ç´¢: å¯ç”¨/ç¦ç”¨
   â€¢ æ£€ç´¢æ¡æ•°: 2-8
   â€¢ æ£€ç´¢è¯­è¨€: ä¸­æ–‡/è‹±æ–‡
   â†“
4. æ‹–åŠ¨æ–¹æ¡†è£å‰ªè¦è¯†åˆ«çš„åŒºåŸŸ
   â†“
5. æŸ¥çœ‹å³ä¾§å®æ—¶é¢„è§ˆ
   â†“
6. ç‚¹å‡»"è¯†åˆ«è¯¥åŒºåŸŸ"æŒ‰é’®
   â†“
7. æŸ¥çœ‹è¯†åˆ«ç»“æœ
   â€¢ Engine: cloud_qwen
   â€¢ Top-5 é¢æ–™ + ç½®ä¿¡åº¦æ¡
   â€¢ æ¨ç†æ–‡æœ¬ï¼ˆå¯æŠ˜å ï¼‰
   â€¢ è¯æ®é“¾æ¥ï¼ˆå¯æŠ˜å ï¼Œå¦‚å¯ç”¨è”ç½‘ï¼‰
```

### æŠ€æœ¯æµç¨‹ï¼ˆè”ç½‘æ¨¡å¼ï¼‰

```
ç”¨æˆ·ç‚¹å‡»è¯†åˆ«
  â†“
ã€Pass 1ã€‘Qwen-VL è§†è§‰è¯†åˆ«
  è¾“å…¥: å›¾ç‰‡
  è¾“å‡º: {"candidates": [æœ€å¤š8ä¸ª], "visual_notes": "..."}
  â†“
ã€è”ç½‘æ£€ç´¢ã€‘å¯¹ Top-5 å€™é€‰æœç´¢
  æœç´¢: "{label} é¢æ–™ æè´¨ ç‰¹æ€§"
  æ”¶é›†: URLs + Snippets
  æ„å»º: evidence_map
  â†“
ã€Pass 2ã€‘Qwen-VL æ–‡æœ¬é‡æ’åº
  è¾“å…¥: å€™é€‰ + visual_notes + evidence
  è¾“å‡º: {"labels": [Top-5], "confidences": [], "reasoning": "...", "evidence": [...]}
  â†“
ã€è¿”å›ç»“æœã€‘
  {
    "materials": ["å°ç¾Šçš®", "PUçš®é©", "ç‰›çš®", "æ¶¤çº¶", "å°¼é¾™"],
    "confidence": [0.55, 0.20, 0.12, 0.08, 0.05],
    "description": "åŸºäºè§†è§‰ç‰¹å¾å’Œè”ç½‘è¯æ®ï¼Œå°ç¾Šçš®çš„å¯èƒ½æ€§æœ€é«˜...",
    "engine": "cloud_qwen",
    "evidence": [
      {"label": "å°ç¾Šçš®", "urls": ["url1", "url2"]},
      {"label": "PUçš®é©", "urls": ["url3"]}
    ]
  }
  â†“
ã€UI æ¸²æŸ“ã€‘
  Engine: cloud_qwen
  
  1. å°ç¾Šçš®        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 55%
  2. PUçš®é©        â–ˆâ–ˆâ–ˆâ–ˆ 20%
  3. ç‰›çš®          â–ˆâ–ˆâ–ˆ 12%
  4. æ¶¤çº¶          â–ˆâ–ˆ 8%
  5. å°¼é¾™          â–ˆ 5%
  
  â–¶ è§£é‡Š / Reasoning
    [æ¨ç†æ–‡æœ¬]
  
  â–¶ è¯æ® / Evidence
    å°ç¾Šçš®:
      - [URL 1]
      - [URL 2]
    PUçš®é©:
      - [URL 3]
```

---

## ğŸ“Š æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç‰ˆæœ¬/è¯´æ˜ |
|------|------|----------|
| **å‰ç«¯** | Streamlit | Web åº”ç”¨æ¡†æ¶ |
| | streamlit-cropper | äº¤äº’å¼è£å‰ªç»„ä»¶ |
| **å›¾åƒå¤„ç†** | Pillow | å›¾åƒæ“ä½œ |
| | NumPy | æ•°å€¼è®¡ç®— |
| **AI å¼•æ“** | Qwen-VL (DashScope) | è§†è§‰è¯­è¨€æ¨¡å‹ |
| **è”ç½‘æ£€ç´¢** | DuckDuckGo Search | æœç´¢å¼•æ“ |
| | requests | HTTP è¯·æ±‚ |
| | readability-lxml | ç½‘é¡µå†…å®¹æå– |
| **å¼€å‘ç¯å¢ƒ** | Python 3.8+ | - |
| | PowerShell | Windows è„šæœ¬ |

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. å¼€æ”¾é›†è¯†åˆ«

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **è¯æ±‡èŒƒå›´** | ä¸å—é™åˆ¶ï¼Œä»»æ„é¢æ–™åç§° |
| **ä¸“ä¸šæœ¯è¯­** | æ”¯æŒï¼ˆå°ç¾Šçš®ã€æ¡‘èš•ä¸ã€ç²¾çººç¾Šæ¯›ç­‰ï¼‰ |
| **å€™é€‰æ•°é‡** | Top-5ï¼ˆPass 1 æœ€å¤š8ä¸ªï¼‰ |
| **å‡†ç¡®æ€§** | é«˜ï¼ˆåŸºäºè§†è§‰ + è¯æ®ï¼‰ |

### 2. RAG æ£€ç´¢å¢å¼º

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **Pass 1** | è§†è§‰è¯†åˆ«ç”Ÿæˆåˆå§‹å€™é€‰ |
| **è”ç½‘æ£€ç´¢** | å¯¹ Top-5 å€™é€‰æœç´¢éªŒè¯ |
| **Pass 2** | åŸºäºè¯æ®é‡æ’åº |
| **è¯æ®å±•ç¤º** | æŒ‰é¢æ–™åˆ†ç»„æ˜¾ç¤º URL |

### 3. é²æ£’æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **JSON è§£æ** | Markdown + æ­£åˆ™è¡¨è¾¾å¼åŒé‡æå– |
| **é”™è¯¯å›é€€** | Pass 1 å¤±è´¥ / è”ç½‘å¤±è´¥ / Pass 2 å¤±è´¥éƒ½æœ‰å›é€€ |
| **ç¼“å­˜ä¼˜åŒ–** | æœç´¢ç»“æœ1å°æ—¶ï¼Œæ¨ç†ç»“æœ2å°æ—¶ |
| **å¼‚å¸¸å¤„ç†** | æ‰€æœ‰å¼‚å¸¸éƒ½è¢«æ•è·å¹¶å‹å¥½æç¤º |

### 4. å¼€å‘ä½“éªŒ

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **ä¸€é”®ä»»åŠ¡** | åˆ›å»ºç¯å¢ƒã€å¯åŠ¨åº”ç”¨ã€è¯Šæ–­ |
| **æ€§èƒ½ä¼˜åŒ–** | ç¦ç”¨åå°ç´¢å¼•/æµ‹è¯•å‘ç°/æ–‡ä»¶ç›‘è§† |
| **CN é•œåƒ** | æ¸…åå¤§å­¦ PyPI é•œåƒåŠ é€Ÿ |
| **æœ¬åœ°è™šæ‹Ÿç¯å¢ƒ** | é¿å…å…¨å±€ Python å†²çª |

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **å¯åŠ¨é€Ÿåº¦** | 5-10ç§’ | Streamlit å¯åŠ¨ï¼ˆä¼˜åŒ–åï¼‰ |
| **è¯†åˆ«é€Ÿåº¦** | 2-5ç§’ | Pass 1ï¼ˆæ— è”ç½‘ï¼‰ |
| | 5-15ç§’ | Pass 1 + è”ç½‘ + Pass 2 |
| **ç¼“å­˜å‘½ä¸­** | 2å°æ—¶ | æ¨ç†ç»“æœç¼“å­˜ |
| | 1å°æ—¶ | æœç´¢ç»“æœç¼“å­˜ |
| **å€™é€‰æ•°é‡** | æœ€å¤š8ä¸ª | Pass 1 |
| | Top-5 | æœ€ç»ˆè¾“å‡º |
| **è¯æ®é“¾æ¥** | æœ€å¤š3ä¸ª/å€™é€‰ | è”ç½‘æ£€ç´¢ç»“æœ |

---

## âœ… éªŒæ”¶æ¸…å•

### åŠŸèƒ½å®Œæ•´æ€§

- [x] å›¾ç‰‡ä¸Šä¼ 
- [x] äº¤äº’å¼è£å‰ª
- [x] å®æ—¶é¢„è§ˆ
- [x] Pass 1 è§†è§‰è¯†åˆ«
- [x] è”ç½‘æ£€ç´¢ï¼ˆå¯é€‰ï¼‰
- [x] Pass 2 é‡æ’åºï¼ˆå¯é€‰ï¼‰
- [x] Top-5 æè´¨æ˜¾ç¤º
- [x] ç½®ä¿¡åº¦è¿›åº¦æ¡
- [x] æ¨ç†æ–‡æœ¬
- [x] è¯æ®é“¾æ¥
- [x] å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­è‹±æ–‡ï¼‰

### æŠ€æœ¯å®ç°

- [x] å¼€æ”¾é›†è¯†åˆ«
- [x] RAG æ¶æ„
- [x] ä¸¤éè¯†åˆ«æµç¨‹
- [x] JSON é²æ£’è§£æ
- [x] è”ç½‘æ£€ç´¢é›†æˆ
- [x] è¯æ®æ”¶é›†å’Œå±•ç¤º
- [x] é”™è¯¯å¤„ç†å’Œå›é€€
- [x] ç¼“å­˜ä¼˜åŒ–
- [x] å¼•æ“è·¯ç”±å™¨

### å¼€å‘ç¯å¢ƒ

- [x] VSCode é…ç½®
- [x] Streamlit é…ç½®
- [x] ä¸€é”®ä»»åŠ¡
- [x] è™šæ‹Ÿç¯å¢ƒ
- [x] CN é•œåƒ
- [x] è¯Šæ–­è„šæœ¬

### æ–‡æ¡£å®Œæ•´æ€§

- [x] README.md
- [x] QUICK_START.md
- [x] DEV_SETUP.md
- [x] ENGINE_ROUTER.md
- [x] JSON_PARSING_SPEC.md
- [x] RAG_REFACTOR_COMPLETE.txt
- [x] APP_INTEGRATION_COMPLETE.txt

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```powershell
# æ–¹æ³• 1: ä½¿ç”¨ä»»åŠ¡
Ctrl+Shift+P â†’ Tasks: Run Task â†’ 01: Ensure venv & deps (CN mirror)

# æ–¹æ³• 2: ä½¿ç”¨è„šæœ¬
powershell -ExecutionPolicy Bypass -File scripts\ensure_venv.ps1
```

### 2. é…ç½® API å¯†é’¥

åˆ›å»º `.streamlit/secrets.toml`:
```toml
DASHSCOPE_API_KEY = "your_api_key_here"
```

### 3. å¯åŠ¨åº”ç”¨

```powershell
# æ–¹æ³• 1: ä½¿ç”¨ä»»åŠ¡
Ctrl+Shift+P â†’ Tasks: Run Task â†’ 02: Run Streamlit (dev)

# æ–¹æ³• 2: ä½¿ç”¨å‘½ä»¤
.\.venv\Scripts\python.exe -m streamlit run app_new.py
```

### 4. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8501

---

## ğŸ“ ä¾èµ–åˆ—è¡¨

```
streamlit                    # Web åº”ç”¨æ¡†æ¶
pillow                       # å›¾åƒå¤„ç†
numpy                        # æ•°å€¼è®¡ç®—
dashscope                    # é˜¿é‡Œäº‘ DashScope SDK
streamlit-cropper            # äº¤äº’å¼è£å‰ªç»„ä»¶
duckduckgo-search>=6.3.0     # æœç´¢å¼•æ“
readability-lxml             # ç½‘é¡µå†…å®¹æå–
requests                     # HTTP è¯·æ±‚
```

---

## ğŸ”§ é…ç½®æ–‡ä»¶

### `.vscode/settings.json`
- ç¦ç”¨åå°ç´¢å¼•
- ç¦ç”¨ linting/æµ‹è¯•å‘ç°
- ç¦ç”¨æ–‡ä»¶ç›‘è§†
- æ€§èƒ½ä¼˜åŒ–

### `.streamlit/config.toml`
- å¼€å‘æ¨¡å¼
- ç¦ç”¨æ–‡ä»¶ç›‘è§†
- ç¦ç”¨é¥æµ‹
- é”™è¯¯æ—¥å¿—

### `requirements.txt`
- æœ€å°ä¾èµ–é›†
- æ˜ç¡®ç‰ˆæœ¬

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’ï¼ˆå¯é€‰ï¼‰

### çŸ­æœŸä¼˜åŒ–

1. **å¤šå¼•æ“æ”¯æŒ**
   - å®ç° GPT-4o-mini
   - å®ç° Gemini
   - å¼•æ“å¯¹æ¯”åŠŸèƒ½

2. **é«˜çº§ RAG**
   - è·å–ç½‘é¡µå®Œæ•´å†…å®¹ï¼ˆ`fetch_readable`ï¼‰
   - å¤šè½®æ£€ç´¢
   - è¯æ®è´¨é‡è¯„åˆ†

3. **UI å¢å¼º**
   - å†å²è®°å½•
   - æ‰¹é‡è¯†åˆ«
   - å¯¼å‡ºç»“æœ

### é•¿æœŸè§„åˆ’

1. **æ¨¡å‹ä¼˜åŒ–**
   - å¾®è°ƒ Qwen-VL
   - æœ¬åœ°å°æ¨¡å‹
   - æ··åˆæ¨¡å¼

2. **æ•°æ®é›†å»ºè®¾**
   - æ”¶é›†ç”¨æˆ·åé¦ˆ
   - æ ‡æ³¨æ•°æ®
   - æŒç»­å­¦ä¹ 

3. **éƒ¨ç½²ä¼˜åŒ–**
   - Docker å®¹å™¨åŒ–
   - äº‘ç«¯éƒ¨ç½²
   - API æœåŠ¡

---

## ğŸ™ è‡´è°¢

- [Streamlit](https://streamlit.io/) - Web åº”ç”¨æ¡†æ¶
- [é˜¿é‡Œäº‘ DashScope](https://dashscope.aliyun.com/) - Qwen-VL API
- [DuckDuckGo](https://duckduckgo.com/) - æœç´¢å¼•æ“
- [streamlit-cropper](https://github.com/turner-anderson/streamlit-cropper) - è£å‰ªç»„ä»¶

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

**é¡¹ç›®çŠ¶æ€**: âœ… å®Œæˆå¹¶éªŒè¯  
**ç‰ˆæœ¬**: 9.0 (Open-Set + RAG + Web Search)  
**æ›´æ–°æ—¶é—´**: 2025-10-24

ğŸ‰ **é¡¹ç›®å·²å®Œæˆï¼æ‰€æœ‰åŠŸèƒ½å·²å®ç°å¹¶éªŒè¯é€šè¿‡ï¼** ğŸš€

